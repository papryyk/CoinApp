{% extends "base.html" %}
{% load static %}

{% block title %}
Main Page
{% endblock %}


{% block css_files %}
<link rel="stylesheet" href="{% static 'hub/index.css' %}">

{% endblock %}


{% block content %}
{% include 'hub/header_summary.html' %}
{% include 'side_ranges.html' %}

<div id="coin-list">
<table cellspacing="0">
    <tr>
        <th>Coin</th>
        <th>Price<form method="POST">{% csrf_token %}
            <button name="b_value" value=True>True</button>
            <button name="b_value" value=False>False</button>
        </form></th>
        <th>24h</th>
        <th>Low 24h</th>
        <th>High 24h</th>
        <th>Market cap</th>
        <th>Min</th>
        <th>Max</th>
    </tr>
    {% for coin in coins %}
    <tr onclick="location.href='{% url 'coin-details' coin.symbol %} ';">
        <td><img src="{{ coin.image }}" alt="Image" class="coin-icon"><b>{{ coin.symbol | upper }}</b> {{ coin.name }}</td>
        {% if coin.current_price|divisibleby:1 and coin.current_price > 100 %}
        <td>
            <b>{{ coin.current_price | floatformat:2 }}</b></td>
        {% else %}
        <td>
            <b>{{ coin.current_price | floatformat:6 }}</b></td>
        {% endif %}
        <td class="{% if coin.price_change_percentage_24h > 0 %}green{% else %}red{% endif %}"><b>{{ coin.price_change_percentage_24h | floatformat:1 }}%</b></td>
        <td><b>{{ coin.low_24h | floatformat:2 }}</b></td>
        <td><b>{{ coin.high_24h | floatformat:2 }}</b></td>
        <td><b>{{ coin.market_cap | floatformat:2 }}</b></td>
        {% if coin.current_price|divisibleby:1 and coin.current_price > 100 %}
        <td><b>{{ coin.ranges.min_range | floatformat:2 }}</b></td>
        <td><b>{{ coin.ranges.max_range | floatformat:2 }}</b></td>
        {% else %}
        <td><b>{{ coin.ranges.min_range | floatformat:6 }}</b></td>
        <td><b>{{ coin.ranges.max_range | floatformat:6 }}</b></td>
        {% endif %}

    </tr>
    {% endfor %}
</table>
{% endblock %}
</div>